<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Editor-OBI</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
	  rel="stylesheet"/>
    <link rel="stylesheet" data-name="vs/editor/editor.main"
	  href="https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/editor/editor.main.css"/>
  </head>
  <body>

    <!-- Loading overlay -->
    <div id="loading-overlay" role="status" aria-live="polite">
      <div class="loading-spinner" aria-hidden="true"></div>
      <div>Carregando…</div>
    </div>

    <div class="container" id="container">
      <!-- Global toolbar (full width) -->
      <div class="main-toolbar" id="global-toolbar">
	<div class="bar">
	  <span class="title">EditorOBI</span>
	  <div class="controls">
	    <!-- Font size -->
	    <button id="font-btn" data-scope="global" title="Tamanho fonte">
	      <img src="img/icon-font-size.svg" height="16pt" alt="Tamanho fonte">
	    </button>

	    <!-- Dark/Light -->
	    <button class="style-toggle-btn" id="global-style-toggle" title="Tema">
	      <img src="img/icon-theme.svg" height="17pt" alt="Tema">
	    </button>

	    <!-- New tab -->
	    <button id="new-tab-btn" title="Nova aba">
	      <img src="img/icon-new-tab.svg" height="19" alt="Nova aba"
		   onerror="this.textContent='+';">
	    </button>
	    <span style="margin-left:10px"></span>

	    <!-- Language selector -->
	    <div class="custom-select" id="language-select-wrapper">
	      <select id="language-select">
		<option value="cpp">C++</option>
		<option value="java">Java</option>
		<option value="python">Python</option>
	      </select>
	    </div>
	    <span style="margin-left:10px"></span>
	    <!-- Info button -->
	    <button id="info-btn" title="Informações">
	      <img src="img/icon-info.svg" height="18pt" alt="Info"
		   onerror="this.replaceWith(document.createTextNode('Info'));">
	    </button>

	  </div>
	</div>
      </div>

      <!-- Tabs bar -->
      <div id="tabs-bar" class="tabs-bar" role="tablist" aria-label="Abas">
      </div>

      <div class="left">
	<div class="pane" id="left-pane">
	  <div class="bar">
	    <span>Código</span>
	    <div class="controls">
	      <!-- Run button -->
	      <button id="run-btn" title="Testar" class="submitButton">
			Testar
	        <!--img src="img/icon-play.svg" height="17pt" alt="Executar"-->
	      </button>
	      <!-- Submit button -->
	      <button id="submit-btn" title="Submeter para correção" class="submitButton">
			Submeter
			<!--img src="img/icon-submit.svg" height="19pt" alt="Submeter para correção"-->
	      </button>
	      <span style="padding-right:30px"></span>
	      <button id="download-btn" title="Salvar" class="textButton">
			Salvar
			<!--img src="img/icon-download.svg" height="17pt" alt="Descarregar"-->
	      </button>
	      <button id="upload-btn" title="Carregar" class="textButton">
			Carregar
			<!--img src="img/icon-upload.svg" height="17pt" alt="Carregar"-->
	      </button>
	      <button id="clear-btn" title="Limpar" class="textButton">
			Limpar
			<!--img src="img/icon-thrash.svg" height="17pt" alt="Limpar"-->
	      </button>
	      <button title="Tela cheia código" aria-label="Tela cheia código" class="btn-expand"
		      data-target="left-pane">
			<img src="img/icon-grow.svg" height="17pt" alt="Tela cheia código">
	      </button>
	    </div>
	  </div>
	  <div id="editor-container" style="height: calc(100% - 30px);"></div>
	</div>
      </div>

      <div class="right">
	<div class="pane" id="pane-rtop" data-pane="rtop">
	  <div class="bar">
	    <span>Entrada</span>
	    <div class="controls">
	      <button id="download-input-btn" title="Salvar entrada" aria-label="Salvar entrada" class="textButton">
			Salvar
		<!--img src="img/icon-download.svg" height="17pt" alt="Salvar"-->
	      </button>
	      <button id="upload-input-btn" title="Carregar entrada" aria-label="Carregar entrada" class="textButton">
			Carregar
		<!--img src="img/icon-upload.svg" height="17pt" alt="Carregar entrada"-->
	      </button>
	      <button id="clear-input-btn" title="Limpar entrada" aria-label="Limpar entrada" class="textButton">
			Limpar
		<!--img src="img/icon-thrash.svg" height="17pt" alt="Limpar entrada"-->
	      </button>
	      <button title="Tela cheia entrada" aria-label="Tela cheia entrada" class="btn-expand"
		      data-target="pane-rtop">
		<img src="img/icon-grow.svg" height="17pt" alt="Tela cheia entrada">
	      </button>
	    </div>
	  </div>
	  <div class="pane-container">
	    <textarea id="stdin-input" spellcheck="false" placeholder="Digite sua entrada aqui…"></textarea>
	  </div>
	</div>

	<div class="pane" id="pane-rbot" data-pane="rbot">
	  <div class="bar">
	    <span>Saída</span>
	    <div class="controls">
	      <!-- <button id="download-output-btn" title="Descarregar saída" aria-label="Descarregar saída"> -->
	      <!-- 	<img src="img/icon-download.svg" height="17pt" alt="Descarregar saída"> -->
	      <!-- </button> -->
	      <button id="clear-output-btn" title="Limpar saída" class="textButton">
			Limpar
		<!--img src="img/icon-thrash.svg" height="17pt" alt="Limpar saída" title="Limpar saída"-->
	      </button>
	      <button id="clear-output-btn" title="Tela cheia saída" aria-label="Tela cheia saída"
		      class="btn-expand" data-target="pane-rbot">
		<img src="img/icon-grow.svg" height="17pt" alt="Tela cheia saída">
	      </button>
	    </div>
	  </div>
	  <div id="stdout-output" class="pane-container">
	  </div>
	</div>
      </div>
      <div class="pane" id="pane-footer" data-pane="footer">
	<div class="status-bar">
	  <div class="status-left">
	    <a href="https://olimpiada.ic.unicamp.br" target="_blank" rel="noopener">Olimpíada Brasileira de Informática</a>
	  </div>
	  <div class="status-right" id="run-status" aria-live="polite">
	    <strong>Status <span id="status-task"></span>: </strong><span id="status-label">Inativo</span>
	    <span class="spinner" id="status-spinner" hidden></span>
	  </div>
	</div>
      </div>
    </div>

	<!-- Prompt Modal for new tab name -->
	<div id="prompt-modal" class="obi-modal" role="dialog" aria-modal="true" aria-labelledby="prompt-title"
		aria-hidden="true">
		<div class="obi-modal__backdrop" data-dismiss="modal" tabindex="-1"></div>
		<div class="obi-modal__dialog" role="document" style="max-width: 400px;">
			<div class="obi-modal__header">
				<h2 id="prompt-title">Nome da nova aba</h2>
				<button id="prompt-close-btn" class="obi-modal__close" aria-label="Fechar">✕</button>
			</div>
			<div class="obi-modal__body">
				<input type="text" id="prompt-input"
					style="width: 95%; padding: 10px; font-size: 14px; border: 1px solid #ccc; border-radius: 4px;"
					placeholder="Digite o nome da aba">
			</div>
			<div class="obi-modal__footer">
				<button id="prompt-cancel-btn" class="obi-modal__action" style="background: #6c757d;">Cancelar</button>
				<button id="prompt-ok-btn" class="obi-modal__action">OK</button>
			</div>
		</div>
		<span class="obi-modal__sentry" tabindex="0" aria-hidden="true"></span>
	</div>

    <!-- Info Modal -->
    <div id="info-modal" class="obi-modal" role="dialog" aria-modal="true" aria-labelledby="info-title"
	 aria-hidden="true">
      <div class="obi-modal__backdrop" data-dismiss="modal" tabindex="-1"></div>
      <div class="obi-modal__dialog" role="document">
	<div class="obi-modal__header">
	  <h2 id="info-title">Como usar o EditorOBI</h2>
	  <button id="info-close-btn" class="obi-modal__close" aria-label="Fechar">✕</button>
	</div>
	<div id="info-content" class="obi-modal__body">
	<p>Você pode criar novas abas e trabalhar nelas de maneira independente, em linguagens diferentes. 
		Para criar uma nova aba, clique no botão <em>Nova Aba</em>
	    ( <img src="img/icon-new-tab-blue.svg" height="16pt" alt="Executar"> ) na barra de ferramentas.

	  <h4>Função Testar</h4>
	  <p>Edite seu código no painel <strong>Código</strong>, digite a entrada a ser usada na execução no
	    painel <strong>Entrada</strong>.
	  <p>Para testar seu código, clique no botão <strong>Testar</strong> na barra de ferramentas do painel <strong>Código</strong>.
		O código submetido será o conteúdo do painel <strong>Código</strong>, e a entrada para o teste será o conteúdo do painel <strong>Entrada</strong>.
	    O resultado da execução do teste será mostrado no painel <strong>Saída</strong>.
		<!--p>Na função <em>Testar</em>, os arquivos de programa têm o mesmo dado à aba, com exceção
	    de programas em Java, que têm sempre o mesmo nome: 
	    <span class="monospaced-regular">tarefa.java</span>. 
	    Note que para Java, portanto, sua classe principal pública deve ser chamada
	    <span class="monospaced-regular">tarefa</span> (em minúsculas).</p-->
	  <p>Você pode testar um único programa por vez, mas pode continuar editando em outras abas
	    enquanto a execução não termina. Há também
	    um intervalo mínimo de 30 segundos entre dois testes consecutivos.
	  <p>Cada execução de teste tem um tempo limite de processamento de 2 segundos, e pode utilizar no máximo 1GB de
	    memória. Se exceder esses limites, a execução será interrompida.
	  <h4>Função Submeter</h4>
	  <p>Após testar seu código e certificar-se de que está correto, submeta sua solução para correção.</p>
	  <p>Para submeter uma solução para correção, clique no botão <em>Submeter</em> na barra de ferramentas do painel <em>Código</em>
			e escolha a tarefa da prova para a qual deseja submeter. O código submetido será o conteúdo do painel <strong>Código</strong>.
	    O resultado da correção será mostrado na aba <strong>Prova</strong>, na tarefa escolhida para submissão.
	   <p>Os limites de tempo e memória são os especificados nos enunciados das tarefas.</p>

	</div>
	<div class="obi-modal__footer">
	  <button id="info-ok-btn" class="obi-modal__action">OK</button>
	</div>
      </div>
      <span class="obi-modal__sentry" tabindex="0" aria-hidden="true"></span>
    </div>

    <script>
      window.AppConfig = {
	  examGate: { enabled: true },
	  openExamUrl: true,
	  useLSP: false
      };

      (function(){
	  try {
	      var mode = localStorage.getItem('obi:globalTheme') || 'light';
	      document.documentElement.setAttribute('data-theme', mode === 'light' ? 'light' : 'dark');
	      var isLight = (mode === 'light');
	      var add = function(sel){ var el=document.querySelector(sel); if (el) el.classList.toggle('light-mode', isLight); };
	      add('#pane-rtop .pane-container');
	      add('#pane-rbot .pane-container');
	  } catch (e) {}
      })();
    </script>

    <!-- Monaco Editor -->
    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/loader.js"></script>
    <script>
      require.config({ paths: { 'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs' } });
      require(['vs/editor/editor.main'], function() {
	  // Hide overlay once Monaco has initialized
	  document.getElementById('loading-overlay')?.classList.add('hidden');
      });
    </script>

    
    <!-- Main entry point -->
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
